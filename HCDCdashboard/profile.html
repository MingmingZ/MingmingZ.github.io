<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>HCDC-profile</title>
    

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/sb-admin.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
    <link href="css/hopscotch.css" rel="stylesheet">
    
<style>
    #map { 
	height: 800px; 
	width:100%}
	
	.info {
    padding: 8px 10px;
    font: 18px/22px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    border-radius: 10px;
	}
	.info h3 {
    margin: 0 0 5px;
    color: #777;
	}
	
</style>
 
  
</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!--<a class="navbar-brand" href="index.html">Houston Community Data Connections Dashboard</a>-->
            </div>
            <!-- Top Menu Items -->
            <ul class="nav navbar-left top-nav">
				<a href="https://kinder.rice.edu/" target="_blank"><img src="img/Rice-I-Kinder-Institute-logo.png" alt="Rice" style="height:43px"/></a>
            </ul>
            <a class="navbar-brand" href="index.html">Houston Community Data Connections Dashboard</a>
            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav">
                  <li>
                        <a href="index.html"><i class="fa fa-fw fa-table"></i> Home</a>
                  </li>
                  <li id="mapbtn"> <a href="Map.html"><em class="fa fa-fw fa-globe"></em> Map</a> </li>
                  <li  class="active">
                        <a href="profile.html"><i class="fa fa-fw fa-table"></i> Community Profile</a>
                    </li>
                    <li>
                        <a href="contact.html"><i class="fa fa-fw fa-send-o"></i> Contact Us</a>
                    </li>
                    <li id="FAQ">
                        <a href="FAQ.html"><i class="fa fa-fw fa-question-circle"></i> Need Help?</a>
                    </li>
					<li id="tutorial" onMouseDown="start()"> 
                   		<a><em class="fa fa-play-circle"></em> Tutorial</a> 
                    </li>
                    <li>
                        <a href="blank-page.html"><i class="fa fa-fw fa-file"></i> Blank Page</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>

        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
              <div class="row">
                   
                   <div class="col-lg-12">
                   <h1 id="profiletitle" class="page-header">
                     Community Profile <small>Overview</small>
                   </h1>
                   </div>
               
              </div>
                
                <div class="row">
					<div class="form-group" id="ctaselect">
                      <select id="cta" class="form-control">
                           	<option selected disabled>Select Neighborhood</option>
                            <option value="K130">1960 / Cypress Creek Central</option>
							<option value="K131">1960 / Cypress Creek North</option>
							<option value="K124">1960 / Cypress Creek South</option>
							<option value="K034">Acres Home</option>
							<option value="K027">Afton Oaks / River Oaks</option>
							<option value="K042">Aldine</option>
							<option value="K134">Aldine Northeast</option>
							<option value="K102">Aldine Northwest</option>
							<option value="K044">Aldine Southeast</option>
							<option value="K039">Aldine West</option>
							<option value="K088">Alief</option>
							<option value="K019">Astrodome</option>
							<option value="K105">Atascocita</option>
							<option value="K138">Barrett</option>
							<option value="K140">Baytown</option>
							<option value="K122">Bear Creek</option>
							<option value="K077">Bellaire</option>
							<option value="K075">Braeburn</option>
							<option value="K020">Braeswood</option>
							<option value="K073">Brays Oaks</option>
							<option value="K091">Briar Forest</option>
							<option value="K087">Carverdale / Westbranch</option>
							<option value="K129">Champions</option>
							<option value="K107">Channelview</option>
							<option value="K119">Cinco Ranch: Harris</option>
							<option value="K113">Clear Lake</option>
							<option value="K056">Clinton Park Tri-Community</option>
							<option value="K053">Cloverleaf</option>
							<option value="K096">Copperfield</option>
							<option value="K137">Crosby</option>
							<option value="K125">Cypress North</option>
							<option value="K123">Cypress South</option>
							<option value="K108">Deer Park</option>
							<option value="K005">Denver Harbor / Port Houston</option>
							<option value="K001">Downtown</option>
							<option value="K009">East Downtown</option>
							<option value="K049">East Houston</option>
							<option value="K046">East Little York / Homestead</option>
							<option value="K043">Eastex - Jensen</option>
							<option value="K010">Eastwood</option>
							<option value="K060">Edgebrook</option>
							<option value="K051">El Dorado / Oates Prairie</option>
							<option value="K111">El Lago</option>
							<option value="K089">Eldridge / West Oaks</option>
							<option value="K095">Eldridge North</option>
							<option value="K036">Fairbanks / Northwest Crossing</option>
							<option value="K003">Fifth Ward</option>
							<option value="K070">Five Corners</option>
							<option value="K024">Fourth Ward</option>
							<option value="K116">Friendswood: Harris</option>
							<option value="K057">Galena Park</option>
							<option value="K052">Galena Park North</option>
							<option value="K064">Golfcrest / Bellfort / Reveille</option>
							<option value="K101">Greenspoint</option>
							<option value="K013">Gulfgate Riverview / Pine Valley</option>
							<option value="K078">Gulfton</option>
							<option value="K058">Harrisburg / Manchester</option>
							<option value="K030">Heights</option>
							<option value="K040">Hidden Valley</option>
							<option value="K139">Highlands</option>
							<option value="K065">Hobby</option>
							<option value="K136">Huffman</option>
							<option value="K104">Humble</option>
							<option value="K045">Humble South</option>
							<option value="K103">IAH</option>
							<option value="K033">Independence Heights</option>
							<option value="K035">Inwood</option>
							<option value="K055">Jacinto City</option>
							<option value="K097">Jersey Village</option>
							<option value="K004">Kashmere Gardens</option>
							<option value="K121">Katy North</option>
							<option value="K094">Katy Northeast</option>
							<option value="K120">Katy Southeast</option>
							<option value="K141">Katy: Harris</option>
							<option value="K135">Kingwood</option>
							<option value="K132">Klein East</option>
							<option value="K038">Klein Far South</option>
							<option value="K099">Klein South</option>
							<option value="K128">Klein West</option>
							<option value="K109">La Porte / Shoreacres</option>
							<option value="K106">Lake Houston</option>
							<option value="K084">Langwood</option>
							<option value="K011">Lawndale / Wayside</option>
							<option value="K031">Lazybrook / Timbergrove</option>
							<option value="K015">MacGregor</option>
							<option value="K007">Magnolia Park</option>
							<option value="K062">Meadowbrook / Allendale</option>
							<option value="K018">Medical Center</option>
							<option value="K092">Memorial</option>
							<option value="K082">Memorial Villages</option>
							<option value="K076">Meyerland</option>
							<option value="K023">Midtown</option>
							<option value="K080">Mid-West</option>
							<option value="K066">Minnetex</option>
							<option value="K118">Mission Bend: Harris</option>
							<option value="K025">Montrose</option>
							<option value="K017">Museum Park</option>
							<option value="K114">Nassau Bay</option>
							<option value="K002">Near Northside</option>
							<option value="K054">Northshore</option>
							<option value="K041">Northside / Northline</option>
							<option value="K037">Northwest Houston</option>
							<option value="K032">Oak Forest</option>
							<option value="K014">OST / South Union</option>
							<option value="K063">Park Place</option>
							<option value="K059">Pasadena</option>
							<option value="K012">Pecan Park</option>
							<option value="K006">Pleasantville</option>
							<option value="K110">Seabrook</option>
							<option value="K008">Second Ward</option>
							<option value="K048">Settegast</option>
							<option value="K079">Sharpstown</option>
							<option value="K050">Sheldon</option>
							<option value="K067">South Acres / Crestmont Park</option>
							<option value="K117">South Belt / Ellington</option>
							<option value="K061">South Houston</option>
							<option value="K068">South Park</option>
							<option value="K133">Spring</option>
							<option value="K085">Spring Branch Central</option>
							<option value="K083">Spring Branch East</option>
							<option value="K086">Spring Branch North</option>
							<option value="K093">Spring Branch West</option>
							<option value="K100">Spring Southwest</option>
							<option value="K069">Sunnyside</option>
							<option value="K016">Third Ward</option>
							<option value="K143">Tomball</option>
							<option value="K127">Tomball South</option>
							<option value="K126">Tomball Southwest</option>
							<option value="K112">Town Lake Village</option>
							<option value="K047">Trinity / Houston Gardens</option>
							<option value="K022">University Place</option>
							<option value="K026">Upper Kirby / Greenway</option>
							<option value="K081">Uptown</option>
							<option value="K142">Waller</option>
							<option value="K028">Washington / Memorial Park</option>
							<option value="K029">Washington East</option>
							<option value="K115">Webster</option>
							<option value="K021">West University / Southside</option>
							<option value="K072">Westbury</option>
							<option value="K090">Westchase</option>
							<option value="K074">Westwood</option>
							<option value="K071">Willow Meadows</option>
							<option value="K098">Willowbrook</option>
                      </select>
                      <br>
					</div>
                <!--
                <ol class="breadcrumb">
                   <li class="active">
                      <i class="fa fa-info-circle"></i> Select Your Neighborhood
                   </li>
               	</ol>	
                -->	
                </div>
                <div class="row">
                	<div id="map"></div>		
                </div>
             </div>
                   
           </div>
           <!-- /.row -->
               


           </div>
            <!-- page wraper -->

    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet-core.js"></script>
	<script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>
    
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
  	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet-src.js"></script>
  	
  	
  	  <!-- Load Leaflet from CDN-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet-src.js"></script>

  <!-- Load Esri Leaflet from CDN -->
  <script src="https://unpkg.com/esri-leaflet@2.0.8"></script>
   
     <!-- Load Esri Leaflet Geocoder from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.2.3/dist/esri-leaflet-geocoder.css">
  <script src="https://unpkg.com/esri-leaflet-geocoder@2.2.3"></script>
  
  <!-- jQuery -->
  <script src="js/jquery.js"></script> 
     
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script> 

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
    
    <script src="js/cta.js"></script>
    <script src="http://leafletjs.com/examples/choropleth/us-states.js"></script>
    
    <script src="js/hopscotch.js"></script> 
    <script src="js/mytourp.js"></script> 
    
	<script>
		var cta;
		var ctap;
  		var map = L.map("map").setView([29.746864, -95.369861], 10);
		
		featureByID={};
		
  		L.esri.basemapLayer("Streets").addTo(map);
		
		
		//add search tool to map; display result marker
		/*var searchControl = L.esri.Geocoding.geosearch({
			providers:[
				L.esri.Geocoding.arcgisOnlineProvider({
					maxResults:1
				})
			],
			zoomToResult:true
			
		}).addTo(map); */
		
		var p1sw=L.point(29.328118, -96.104631),
			p2ne=L.point(30.365650, -94.740331),
			bounds=L.bounds(p1sw,p2ne);
			
		map.setMaxBounds(bounds);
			
		
		var searchControl = new L.esri.Geocoding.geosearch({
			providers:[
				L.esri.Geocoding.arcgisOnlineProvider({
					maxResults:1
				})
			],
			zoomToResult:true	
		}).addTo(map);
		
		var results = L.layerGroup().addTo(map);

  		searchControl.on('results', function(data){
    	results.clearLayers();
    	for (var i = data.results.length - 1; i >= 0; i--) {
      	results.addLayer(L.marker(data.results[i].latlng));
		
			
    }
  });
		//end of add search tool to map
		
		//add geojson cta
		
		var NHStyle = {
			'color': "#939393",
			'weight': 3,
			'fillOpacity': 0.3			
		};
		
		//L.geoJson(cta).addTo(map);
		geojson = L.geoJson(cta, {
    		style: NHStyle,
    		onEachFeature: onEachFeature
		}).addTo(map);
		
		//hightlight the feature
		function highlightFeature(e) {
    		var layer = e.target;
    		layer.setStyle({
				weight: 5,
        		color: '#d0a94c',
        		dashArray: '',
        		fillOpacity: 0.5
    		});

    		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        		layer.bringToFront();
    		}
			info.update(layer.feature.properties);
		}
		
		function resetHighlight(e) {
			geojson.resetStyle(e.target);
			info.update();
		}
		
		
		function onEachFeature(feature, layer) {
    		layer.on({
        		mouseover: highlightFeature,
				mouseout: resetHighlight,
				click:viewprofile
    		});
			featureByID[feature.properties.KCTA_ID] = layer;
		}	

		
		//link to profile page
		function viewprofile(e) {
			//alert(e.target.feature.properties.KCTA_NAME);
			window.location = e.target.feature.properties.KCTA_ID + '.html';
		}
		
		
		//info window
		var info = L.control();

		info.onAdd = function (map) {
    		this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    		this.update();
    		return this._div;
		};

		// method that we will use to update the control based on feature properties passed
		info.update = function (props) {
			//ctap=props.KCTA_NAME;
			this._div.innerHTML = '<h3>Community Name</h3>' +  (props ?
        	'<b>' + props.KCTA_NAME + '</b><br><br>' + 'Click to view the profile'
        	: 'Hover over a CTA');
			
		};
		

		info.addTo(map);

		$(document).ready(function() {
  			$("#cta").select2();
			
			$("#cta").change(function(){
				var elc = $(this);
				//alert (elc.val());
				for(i in cta.features){
     				if(cta.features[i].properties.KCTA_ID === elc.val()){
						//alert("OK");
					map.fitBounds(featureByID[cta.features[i].properties.KCTA_ID].getBounds());
					//highlightFeature(featureByID[cta.features[i].properties.KCTA_ID]);
					featureByID[cta.features[i].properties.KCTA_ID].setStyle({
						weight: 5,
        				color: '#C96464',
        				dashArray: '',
        				fillOpacity: 0.5
    				});
					//var centlat =
					//alert(cta.features[i].properties.cen_lat);
					var marker = L.marker([cta.features[i].properties.cen_lat,cta.features[i].properties.cen_lng]).addTo(map);
					}
				}
			});
		});
		
		

		
	function start(){
		hopscotch.startTour(maptourp);
	} 	

		
		$(".leaflet-control-zoom.leaflet-bar.leaflet-control").attr("id","zoomin");
		$(".leaflet-control-zoom-out").attr("id","zoomout");
		$(".geocoder-control-input leaflet-bar").attr("id","search");

	</script>
    
    
</body>

</html>
